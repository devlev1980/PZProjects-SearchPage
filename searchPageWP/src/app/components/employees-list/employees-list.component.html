
<div class="filter_results" *ngIf="profiles.length > 0">Results: {{(profiles | searchByEmployee: byEmployeeTerm | searchByDepartment: byDepartmentTerm | searchByLocation: byLocation | searchByAZ: byAZ).length}}</div>

<div class="cards__container" *ngIf="profiles.length> 0;else noProfiles">

  <!--paginate: {id: 'custom', itemsPerPage: 5, currentPage: currentPage, totalItems: totalItems  } | searchByDepartment: byDepartmentTerm | searchByLocation: byLocation |searchByEmployee: byEmployeeTerm "  >-->
  <div class="card" *ngFor="let profile of profiles
  | searchByDepartment: byDepartmentTerm |
  searchByLocation: byLocation |
  searchByEmployee: byEmployeeTerm |
  searchByAZ: byAZ |
   paginate: {id: 'custom', itemsPerPage: 10, currentPage: currentPage, totalItems: totalItems };let i=index"    >
    <div class="card__body">
      <h3 class="card__title" >{{profile.FirstName}} {{profile.LastName}}</h3>
      <div class="card__phones">
        <a href="tel:{{profile.WorkPhone}}">
          <img   [src]="profile.workPhoneIconUrl" #workPhonesIconsRef [id]="'icon'+i"  (mouseover)="onHoverOnWorkPhone(profile,i)" (mouseout)="onLeaveOnWorkPhone(profile,i)" class="work__phone" alt="work phone" >
<!--          <img *ngIf="isShowWorkIcon && i === profileIndex" #workPhoneHoverImgRef  [src]="workPhoneImgSrc"    class="work__phone" alt="work phone" >-->
          <span class="card__phones-work" *ngIf="profile.WorkPhone;else notAvailable">{{profile.WorkPhone}}</span>
          <ng-template #notAvailable>
            <span class="card__phones-work">N/A</span>
          </ng-template>
        </a>
        <a href="tel:{{profile.MobilePhone}}" (mouseover)="onHoverOnMobileIcon()" (mouseout)="onLeaveOnMobileIcon()">
          <img [src]="profile.mobilePhoneIconUrl"     (mouseover)="onHoverOnMobileIcon()" (mouseout)="onLeaveOnMobileIcon()" alt="cell phone" class="cell__phone">
          <span class="card__phones-cell" *ngIf="profile.MobilePhone; else notAvailable">{{profile.MobilePhone}}</span>
        </a>
      </div>
      <div class="card__employee-info">
        <div class="card__imgWrapper">
          <img  src="{{profile.PictureUrl}}" alt="avatar" *ngIf="profile.PictureUrl;else noPicture" >
          <ng-template #noPicture>
            <div class="initials">
              <span>{{profile.FirstName.substring(0, 1)}}</span>
              <span >{{profile.LastName.substring(0, 1)}}</span>
            </div>
          </ng-template>
        </div>
        <div class="card__infoWrapper" >
          <div class="email" >
            <img [src]="profile.emailIconUrl"   alt="email" (mouseover)="onHoverOnWorkPhone(profile,i)">
            <a href="mailto:{{profile.WorkEmail}}" *ngIf="profile.WorkEmail;else workEmailNorAvailable" >{{profile.WorkEmail}}</a>
            <ng-template #workEmailNorAvailable>
              <span>Email N/A</span>
            </ng-template>
          </div>
          <div class="job">
            <img [src]="jobImgSrc" >
            <span *ngIf="profile.jobIconUrl;else noJobTitle">{{profile.JobTitle}}</span>
            <ng-template #noJobTitle>
              <span>Job N/A</span>
            </ng-template>
          </div>
          <div class="department" (mouseover)="onHoverOnDepartmentIcon()" (mouseout)="onLeaveOnDepartmentIcon()">
            <img [hidden]="isShowDepartmentIcon"  [src]="profile.departmentIconUrl" alt="department">
<!--            <img [hidden]="!isShowDepartmentIcon" src="https://sytedev01.mobileye.com/sites/apps/SiteAssets/icons/department_hover.png?csf=1&e=ZzKqbU" alt="">-->
            <span>{{profile.Department}}</span>
          </div>
        </div>
      </div>
      <div class="menu">
        <button mat-icon-button [matMenuTriggerFor]="menu" (menuOpened)="onOpenMenu(profile.Manager)" yPosition="below" class="employee__menu" aria-label="Example icon-button with a menu">
          <img src="https://sytedev01.mobileye.com/sites/apps/SiteAssets/icons/more_vert-black-18dp.svg?csf=1&e=LDjLqn" alt="menu">
        </button>
        <mat-menu #menu="matMenu" class="sub__menu">
          <button mat-menu-item (mouseover)="onHoverLocationSubMenu()" (mouseleave)="onLeaveLocationSubMenu()">
            <img   alt="location" [src]="profile.locationIconUrl">
            <span *ngIf="profile.Office;else buildingNotAvailable"> {{profile.Office}}</span>
            <ng-template #buildingNotAvailable>
              <span>Office N/A</span>
            </ng-template>
            <div *ngIf="profile.OfficeNumber;else officeNumberNotAvailable">Room {{profile.OfficeNumber}}</div>
            <ng-template #officeNumberNotAvailable>
              <div>Room N/A</div>
            </ng-template>
          </button>
          <button mat-menu-item >
            <img [src]="profile.managerIconUrl" alt="manager">
            <span>AAA</span>
          </button>
          <button mat-menu-item>
            <img [src]="profile.workADayIconUrl" alt="work a day">
            <a href="#">View in workday</a>
          </button>
        </mat-menu>
      </div>
    </div>
  </div>
</div>



<ng-template #noProfiles>
  <div class="spinner__container">
    <div class="spinner-border" role="status"></div>
  </div>
</ng-template>

<pagination-controls *ngIf="profiles.length> 0" (pageBoundsCorrection)="pageChanged($event)"
                     (pageChange)="currentPage = $event"
                     autoHide="false"
                     directionLinks="true"
                     id="custom"
                     maxSize="9"
                     nextLabel="Next"
                     previousLabel="Previous"
                     responsive="true"
                     screenReaderCurrentLabel="You're on page"
                     screenReaderPageLabel="page"
                     screenReaderPaginationLabel="Pagination">
</pagination-controls>




